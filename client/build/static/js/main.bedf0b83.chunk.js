(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{337:function(e,t,a){e.exports=a(554)},342:function(e,t,a){},343:function(e,t,a){},548:function(e,t,a){},550:function(e,t,a){},554:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(257),o=a(165),l=a(298),c=localStorage.getItem("language");c||(c="en-US"),i.a.use(l.a).use(o.e).init({lng:c,fallbackLng:"en-US",whitelist:["en-US","fr-FR"],backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},debug:!1,interpolation:{escapeValue:!1}});i.a;var s=a(5),m=a.n(s),u=(a(342),a(343),a(35)),d=a(50),p=a.n(d),g=a(76),f=a(12),v=a.n(f),h="https://api.themoviedb.org/3/",E="844dba0bfd8f3a4f3799f6130ef9e335",b=localStorage.getItem("language"),y="http://image.tmdb.org/t/p/",w={"Content-Type":"application/json"};function x(){return{type:"auth_user",payload:v.a.get("".concat("/api/users","/auth")).then((function(e){return e.data}))}}var j=a(18),_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;function a(a){var i=Object(j.c)((function(e){return e.user})),o=Object(j.b)();return Object(n.useEffect)((function(){o(x()).then(function(){var e=Object(g.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,!n.payload.isAuth;case 2:if(!e.sent){e.next=6;break}t&&a.history.push("/login"),e.next=7;break;case 6:!1===t&&a.history.push("/landing");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[o,a.history]),r.a.createElement(e,Object.assign({},a,{user:i}))}return a},O=a(312),k=a(161),N=a(162);function S(){var e=Object(k.a)(["\n  border: 4px solid #757575; /* grey */\n  border-top: 5px solid #19ba90; /* Blixbox green */\n  border-radius: 50%;\n  width: 55px;\n  height: 55px;\n  animation: spin 0.8s linear infinite;\n  margin: 20px auto;\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"]);return S=function(){return e},e}var C=N.a.div(S()),I=function(){return r.a.createElement(C,null)},F=a(48),M=a.n(F),T=(a(365),a(3)),z=a(605),q=a(100),R=a(156),A=a(72),D=a(587),P=z.a.Title;var L=function(e){var t=e.landing,a=e.genre;return t?r.a.createElement("div",{style:{background:"linear-gradient(to bottom, rgba(0,0,0,0)\n            39%,rgba(0,0,0,0)\n            41%,rgba(0,0,0,0.65)\n            100%),\n            url('".concat(e.image,"'), #1c1c1c"),height:"400px",backgroundSize:"100%, cover",backgroundPosition:"center, center",backgroundPositionY:"9px",width:"100%",position:"relative"}}):a?r.a.createElement("div",{style:{background:"linear-gradient(to bottom, rgba(0,0,0,0)\n            39%,rgba(0,0,0,0)\n            41%,rgba(0,0,0,0.65)\n            100%),\n            url('".concat(e.image,"'), #1c1c1c"),height:"400px",backgroundSize:"100%, cover",backgroundPosition:"center, center",backgroundPositionY:"9px",width:"100%",position:"relative"}},r.a.createElement("div",null,r.a.createElement("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"10px",padding:"10px",position:"absolute",maxWidth:"500px",bottom:"2rem",marginLeft:"2rem"}},r.a.createElement(P,{style:{color:"white"},level:2}," ",e.genreName)))):void 0},B=a(602),U=a(613),W=a(130),Y=a.n(W);var H=function(e){var t=Object(O.a)().t,a=e.actor,n=e.movie,i=e.image,o=e.movieId,l=e.movieName,c=e.actorName,s=e.charName,m=e.date,u=e.vote,d=e.movieGenre,p="#999",g="#cd5c5c",f="#ffa500",v="#52c41a",h=function(e){var t=v;return e&&0!==u?e<5.5?t=g:e<7&&(t=f):t=p,t}(u);return void 0!==a?r.a.createElement(A.a,{lg:4,md:6,xs:24},r.a.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(B.a,{hoverable:!0,style:{width:"100%"},alt:l,cover:r.a.createElement("img",{alt:c,src:i?"".concat(y).concat("w154").concat(i):"https://res.cloudinary.com/dkyqbngya/image/upload/v1586537514/twdjio2duy8ebxulqwti.png"})},r.a.createElement("h3",{style:{textAlign:"center",fontWeight:"bold"}},c),r.a.createElement("h5",{style:{textAlign:"center",fontWeight:"bold"}},s)))):void 0!==n?r.a.createElement(A.a,{lg:4,md:6,xs:24},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(U.a,{style:{backgroundColor:h},offset:[-15,15],count:u},r.a.createElement(B.a,{className:"posterCard",hoverable:!0,style:{width:"100%",height:"100%"},alt:l,cover:r.a.createElement("img",{onClick:function(){return window.location.href="/movie/"+o},alt:l,src:i?"".concat(i):t("landing.notAvail")})},r.a.createElement("a",{style:{color:"black"},href:"/movie/".concat(o)},r.a.createElement("div",{style:{textAlign:"center",fontWeight:"bold"}},l," (",m?Y()(new Date(m)).format("YYYY"):"N/A",")")),r.a.createElement("br",null),r.a.createElement("div",{style:{textAlign:"center"}},d))))):void 0};function V(){var e=Object(k.a)(["\n  max-width: 1280px;\n  width: 100%;\n  height: 55px;\n  background: white;\n  margin: 0 auto;\n  border-radius: 40px;\n  border: solid 0.5px black;\n  position: relative;\n  color: black;\n\n  .fa-search {\n    position: absolute;\n    left: 20px;\n    top: 12px;\n    color: black;\n    z-index: auto;\n  }\n\n  input {\n    font-family: 'Abel', sans-serif;\n    font-size: 28px;\n    position: absolute;\n    left: 0px;\n    margin: 8px 0;\n    padding: 0 0 0 60px;\n    border: 0;\n    width: 95%;\n    background: transparent;\n    height: 40px;\n    color: black;\n    box-sizing: border-box;\n\n    :focus {\n      outline: none;\n    }\n\n    @media screen and (max-width: 720px) {\n      font-size: 28px;\n    }\n  }\n"]);return V=function(){return e},e}function $(){var e=Object(k.a)(["\n  width: 100%;\n  height: 105px;\n  background: white;\n  padding: 25px 20px 0px 20px;\n  box-sizing: border-box;\n  color: black;\n"]);return $=function(){return e},e}var Z=N.a.div($()),X=N.a.div(V()),G=a(616),J=function(e){var t=e.callback,a=Object(O.a)().t,i=Object(n.useState)(""),o=Object(T.a)(i,2),l=o[0],c=o[1],s=Object(n.useRef)(null),m=function(e){var a=e.target.value;clearTimeout(s.current),c(a),s.current=setTimeout((function(){t(a)}),500)};return r.a.createElement(Z,null,r.a.createElement(X,null,r.a.createElement(G.a,{className:"fa-search",style:{fontSize:"30px"}}),r.a.createElement("input",{type:"text",className:"large",placeholder:a("landing.search"),onChange:m,value:l}),r.a.createElement("input",{type:"text",className:"small",placeholder:a("landing.searchSmall"),onChange:m,value:l})))},K=a(40),Q=a(614),ee=a(248),te=a.n(ee),ae=a(9),ne=a(45),re=localStorage.getItem("language"),ie=new Date;var oe=z.a.Title,le=new Date,ce=function(){var e=function(){var e=Object(n.useState)({Movies:[]}),t=Object(T.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!0),o=Object(T.a)(i,2),l=o[0],c=o[1],s=Object(n.useState)(!1),m=Object(T.a)(s,2),u=m[0],d=m[1],f=Object(n.useState)(""),v=Object(T.a)(f,2),b=v[0],y=v[1],w=Object(n.useState)("popularity.desc"),x=Object(T.a)(w,2),j=x[0],_=x[1],O=Object(n.useState)({min:0,max:10}),k=Object(T.a)(O,2),N=k[0],S=k[1],C=Object(n.useState)({min:1980,max:2020}),I=Object(T.a)(C,2),F=I[0],M=I[1],z=Object(n.useState)([]),q=Object(T.a)(z,2),R=q[0],A=q[1],D=Object(n.useRef)(null),P=Object(n.useRef)(null),L=function(){var e=Object(g.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!1),c(!0),a=t.search("page"),e.prev=3,e.next=6,fetch(t);case 6:return e.next=8,e.sent.json();case 8:n=e.sent,r((function(e){return Object(ne.a)({},e,{Movies:-1!==a?[].concat(Object(ae.a)(e.Movies),Object(ae.a)(n.results)):Object(ae.a)(n.results),CurrentPage:n.page,totalPages:n.total_pages})})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),d(!0);case 15:c(!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=localStorage.getItem("language");L("".concat(h,"discover/movie?api_key=").concat(E,"&language=").concat(e,"&vote_count.gte=2500&sort_by=").concat(j,"&primary_release_year=").concat(b,"&vote_average.gte=").concat(N.min,"&vote_average.lte=").concat(N.max,"&primary_release_date.gte=").concat(F.min,"-01-01&primary_release_date.lte=").concat(F.max===ie.getFullYear()?function(e){var t=e.getFullYear().toString(),a=(e.getMonth()+1).toString(),n=e.getDate().toString(),r=a.split(""),i=n.split("");return t+"-"+(r[1]?a:"0"+r[0])+"-"+(i[1]?n:"0"+i[0])}(ie):F.max+"-12-31","&with_genres=").concat(R))}),[re,b,j,N.min,N.max,F.min,F.max,R]),[{item:a,loading:l,error:u,year:b,sort:j,rating:N,yearRange:F,genreID:R,selectEl:D,selectElPop:P},L,function(e){M({min:1980,max:2020}),y(e.target.value),c(!1)},function(e){_(e.target.value),c(!1)},function(e){_("popularity.desc"),S(e),c(!1)},function(e){y(""),D.current.value="",M(e),c(!1)},function(e){A(e.target.value),c(!1)},function(){D.current.value="",P.current.value="popularity.desc",y(""),A(""),S({min:0,max:10}),M({min:1980,max:2020}),_("popularity.desc"),c(!1)}]}(),t=Object(T.a)(e,8),a=t[0],i=a.item,o=i.Movies,l=i.CurrentPage,c=i.totalPages,s=a.loading,m=a.error,u=a.year,d=a.sort,f=a.rating,v=a.yearRange,w=a.genreID,x=a.selectEl,j=a.selectElPop,_=t[1],k=t[2],N=t[3],S=t[4],C=t[5],F=t[6],M=t[7],z=Object(n.useState)(""),P=Object(T.a)(z,2),B=P[0],U=P[1],W=Object(n.useState)(!1),Y=Object(T.a)(W,2),V=Y[0],$=Y[1],Z=Object(n.useRef)(null),X=Object(O.a)().t;function G(e){var t=e.getFullYear().toString(),a=(e.getMonth()+1).toString(),n=e.getDate().toString(),r=a.split(""),i=n.split("");return t+"-"+(r[1]?a:"0"+r[0])+"-"+(i[1]?n:"0"+i[0])}Object(n.useEffect)((function(){window.addEventListener("scroll",ce)}),[]);var ee=[{id:28,name:X("genre.Action")},{id:12,name:X("genre.Adventure")},{id:16,name:X("genre.Animation")},{id:35,name:X("genre.Comedy")},{id:80,name:X("genre.Crime")},{id:99,name:X("genre.Documentary")},{id:18,name:X("genre.Drama")},{id:10751,name:X("genre.Family")},{id:14,name:X("genre.Fantasy")},{id:36,name:X("genre.History")},{id:27,name:X("genre.Horror")},{id:10402,name:X("genre.Music")},{id:9648,name:X("genre.Mystery")},{id:10749,name:X("genre.Romance")},{id:878,name:X("genre.Sci-Fi")},{id:10770,name:X("genre.TV-Movie")},{id:53,name:X("genre.Thriller")},{id:10752,name:X("genre.War")},{id:37,name:X("genre.Western")}],ce=function(e){var t="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,a=document.body,n=document.documentElement,r=Math.max(a.scrollHeight,a.offsetHeight,n.clientHeight);t+window.pageYOffset>=r-1&&Z.current&&Z.current.click()},se=(new Date).getFullYear(),me=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_tqdqw1tcevm.js"});return m?r.a.createElement("div",{style:{width:"100%",fontSize:"1.5rem",height:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},"Woops! Something went very wrong..."):r.a.createElement("div",{style:{width:"100%",margin:"0"}},r.a.createElement(L,{landing:!0,image:"https://res.cloudinary.com/dkyqbngya/image/upload/v1586011642/czr9s0nxspurc9blgn9l.jpg"}),r.a.createElement(J,{callback:function(e){var t=e?"".concat(h,"search/movie?api_key=").concat(E,"&language=").concat(b,"&query=")+e:"".concat(h,"discover/movie?api_key=").concat(E,"&language=").concat(b,"&vote_count.gte=2500&sort_by=").concat(d,"&primary_release_year=").concat(u,"&primary_release_date.gte=").concat(v.min,"-01-01&primary_release_date.lte=").concat(v.max===le.getFullYear()?G(le):v.max+"-12-31","&with_genres=").concat(w);U(e),_(t)}}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(q.a,{type:"primary",shape:"round",onClick:function(){$(!V)},style:{fontSize:"1rem"}},X(V?"filters.dontShowFilters":"filters.showFilters"))),V&&r.a.createElement("div",{style:{width:"85%",margin:"1rem auto",justifyContent:"center"}},r.a.createElement("br",null),r.a.createElement(R.a,{gutter:[8,8]},r.a.createElement(A.a,{span:12},r.a.createElement("form",{style:{textAlign:"center"}},r.a.createElement("label",{style:{padding:"10px"}},r.a.createElement("b",null,X("filters.sortMovies"),":")),r.a.createElement("select",{name:"sortBy",onChange:N,ref:j},r.a.createElement("option",{value:"popularity.desc"},X("filters.sortMovies")),r.a.createElement("option",{value:"primary_release_date.desc"},X("filters.releaseYearHigh")),r.a.createElement("option",{value:"primary_release_date.asc"},X("filters.releaseYearLow")),r.a.createElement("option",{value:"original_title.asc"},X("filters.titleName")),r.a.createElement("option",{value:"vote_average.desc"},X("filters.ratingHigh")),r.a.createElement("option",{value:"vote_average.asc"},X("filters.ratingLow"))))),r.a.createElement("br",null),r.a.createElement(A.a,{span:12},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("p",{style:{display:"flex",justifyContent:"center",paddingRight:"20px"}},r.a.createElement("b",null,X("filters.rating"))),r.a.createElement(te.a,{className:"input-range",maxValue:10,minValue:0,step:2,value:f,onChange:function(e){return S(e)}}))),r.a.createElement("br",null)),r.a.createElement(R.a,{gutter:[8,8]},r.a.createElement(A.a,{span:12},r.a.createElement("form",{style:{textAlign:"center"}},r.a.createElement("label",{style:{padding:"10px"}},r.a.createElement("b",null,X("filters.sortYear"),":")),r.a.createElement("select",{onChange:k,ref:x},r.a.createElement("option",{value:""},X("filters.year")),Array.from(new Array(41),(function(e,t){return r.a.createElement("option",{key:t,value:se-t},se-t)}))))),r.a.createElement(A.a,{span:12},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("p",{style:{display:"flex",justifyContent:"center",paddingRight:"20px"}},r.a.createElement("b",null,X("filters.releaseYear"))),r.a.createElement(te.a,{className:"input-range",maxValue:2020,minValue:1980,step:10,value:v,onChange:function(e){return C(e)}})))),r.a.createElement(D.a,null,"Genres"),r.a.createElement("div",{style:{textAlign:"center"}},ee.map((function(e){return r.a.createElement(q.a,{key:e.name,shape:"round",size:"small",onClick:F,value:e.id,style:{borderColor:"#19ba90",textAlign:"center",fontSize:"0.9em",margin:"1px"}},e.name)}))),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(q.a,{onClick:M},X("filters.clearFilters")))),r.a.createElement("div",{style:{width:"85%",margin:"1rem auto"}},r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{level:2},r.a.createElement(me,{type:"icon-movie3",style:{fontSize:"35px",paddingRight:"10px"}}),X(B?"landing.searchRes":"landing.latest")),r.a.createElement("hr",null),r.a.createElement("br",null)),r.a.createElement(R.a,{gutter:[16,16]},void 0!==o&&o[0]?o&&o.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:e.id},e&&e.poster_path&&e.release_date&&e.vote_count>2300&&null!==e.imdb_id&&null!==e.backdrop_path&&null!==e.overview&&r.a.createElement(H,{movie:!0,image:e.poster_path?"".concat(y).concat("w500").concat(e.poster_path):X("landing.notAvail"),movieId:e.id,movieName:e.title,date:e.release_date,vote:e.vote_average?e.vote_average:"N/A",movieGenre:e.genre_ids&&e.genre_ids.length&&e.genre_ids.map((function(e){return r.a.createElement("span",{key:e},ee.map((function(t){return e===t.id&&r.a.createElement(K.b,{key:t.name,to:"/landing/genre/".concat(t.name,"/").concat(t.id)},r.a.createElement(q.a,{key:t.name,shape:"round",size:"small",style:{borderColor:"#19ba90",textAlign:"center",fontSize:"0.9em",margin:"1px"}},t.name))})))})).slice(0,3)}))})):!o[0]&&!s&&r.a.createElement("div",{style:{width:"100%",fontSize:"1.5rem",height:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},X("landing.noresults"))),s&&r.a.createElement(I,null),l<c&&!s&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("div",{ref:Z,className:"loadMore",onClick:function(){var e="".concat(h,"discover/movie?api_key=").concat(E,"&language=").concat(b,"&vote_count.gte=2500&sort_by=").concat(d,"&primary_release_year=").concat(u,"&vote_average.gte=").concat(f.min,"&vote_average.lte=").concat(f.max,"&primary_release_date.gte=").concat(v.min,"-01-01&primary_release_date.lte=").concat(v.max===le.getFullYear()?G(le):v.max+"-12-31","&with_genres=").concat(w,"&page=").concat(l+1),t="".concat(h,"search/movie?api_key=").concat(E,"&language=").concat(b,"&query=").concat(B,"&page=").concat(l+1);_(B?t:e)}},X("landing.loadmore")))))},se=z.a.Title,me=function(){var e=Object(u.g)(),t=e.genreId,a=e.genreName,i=e.movieId,o=function(e){var t=Object(n.useState)({Movies:[]}),a=Object(T.a)(t,2),r=a[0],i=a[1],o=Object(n.useState)(!0),l=Object(T.a)(o,2),c=l[0],s=l[1],m=Object(n.useState)(!1),d=Object(T.a)(m,2),f=d[0],v=d[1],b=Object(u.f)(),y=function(){var e=Object(g.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!1),s(!0),a=t.search("page"),e.prev=3,e.next=6,fetch(t);case 6:return e.next=8,e.sent.json();case 8:0===(n=e.sent).results.length&&b.goBack(),r=Math.floor(20*Math.random()),i((function(e){return Object(ne.a)({},e,{Movies:-1!==a?[].concat(Object(ae.a)(e.Movies),Object(ae.a)(n.results)):Object(ae.a)(n.results),MainMovieImage:e.MainMovieImage||n.results[r],CurrentPage:n.page,totalPages:n.total_pages})})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),v(!0),console.error(e.t0);case 18:s(!1);case 19:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var t=localStorage.getItem("language");y("".concat(h,"discover/movie?api_key=").concat(E,"&language=").concat(t,"&with_genres=").concat(e))}),[e]),[{state:r,loading:c,error:f},y]}(t),l=Object(T.a)(o,2),c=l[0],s=c.state,m=s.Movies,d=s.MainMovieImage,f=s.CurrentPage,v=s.totalPages,w=c.loading,x=c.error,j=l[1],_=Object(u.f)(),k=function(){_.push("/movie/".concat(i))},N=Object(n.useState)(""),S=Object(T.a)(N,2),C=S[0],F=S[1],M=Object(n.useRef)(null),z=Object(O.a)().t;Object(n.useEffect)((function(){window.addEventListener("scroll",D)}),[]);var A=[{id:28,name:z("genre.Action")},{id:12,name:z("genre.Adventure")},{id:16,name:z("genre.Animation")},{id:35,name:z("genre.Comedy")},{id:80,name:z("genre.Crime")},{id:99,name:z("genre.Documentary")},{id:18,name:z("genre.Drama")},{id:10751,name:z("genre.Family")},{id:14,name:z("genre.Fantasy")},{id:36,name:z("genre.History")},{id:27,name:z("genre.Horror")},{id:10402,name:z("genre.Music")},{id:9648,name:z("genre.Mystery")},{id:10749,name:z("genre.Romance")},{id:878,name:z("genre.Sci-Fi")},{id:10770,name:z("genre.TV-Movie")},{id:53,name:z("genre.Thriller")},{id:10752,name:z("genre.War")},{id:37,name:z("genre.Western")}],D=function(e){var t="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,a=document.body,n=document.documentElement,r=Math.max(a.scrollHeight,a.offsetHeight,n.clientHeight);t+window.pageYOffset>=r-1&&M.current&&M.current.click()},P=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_tqdqw1tcevm.js"});return x?r.a.createElement("div",null,"Something went wrong..."):r.a.createElement("div",{style:{width:"100%",margin:"0"}},w?r.a.createElement("div",null,r.a.createElement(I,null)):null!==d&&r.a.createElement(L,{genre:!0,image:d.backdrop_path?"".concat(y).concat("w1280").concat(d.backdrop_path):"https://res.cloudinary.com/dkyqbngya/image/upload/v1586787757/detykqycj7ejezsjmxln.png",genreName:a}),r.a.createElement(J,{callback:function(e){var a=e?"".concat(h,"search/movie?api_key=").concat(E,"&language=").concat(b,"&with_genres=").concat(t,"&query=")+e:"".concat(h,"discover/movie?api_key=").concat(E,"&language=").concat(b,"&with_genres=").concat(t);F(e),j(a)}}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(q.a,{type:"primary",shape:"round",style:{fontSize:"1rem"}},r.a.createElement("a",{href:"/landing"},z("genre.landing")))),r.a.createElement("div",{style:{width:"85%",margin:"1rem auto"}},w?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(se,{level:2},r.a.createElement(P,{type:"icon-movie3",style:{fontSize:"35px",paddingRight:"10px"}}),C?z("landing.searchRes"):a),r.a.createElement("hr",null),r.a.createElement("br",null)),r.a.createElement(R.a,{gutter:[16,16]},m[0]?m&&m.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:e.id},e&&e.poster_path&&e.release_date&&e.vote_count>2300&&null!==e.imdb_id&&null!==e.backdrop_path&&null!==e.overview&&r.a.createElement(H,{movie:!0,onClick:k,image:e.poster_path?"".concat(y).concat("w500").concat(e.poster_path):z("landing.notAvail"),movieId:e.id,movieName:e.title,date:e.release_date,vote:e.vote_average?e.vote_average:"N/A",movieGenre:e.genre_ids&&e.genre_ids.length&&e.genre_ids.map((function(e){return r.a.createElement("span",{key:e},A.map((function(t){return e===t.id&&r.a.createElement(K.b,{key:t.name,to:"/landing/genre/".concat(t.name,"/").concat(t.id)},r.a.createElement(q.a,{key:t.name,shape:"round",size:"small",style:{borderColor:"#19ba90",textAlign:"center",fontSize:"0.9em",margin:"1px"}},t.name))})))})).slice(0,3)}))})):!m[0]&&!w&&r.a.createElement("div",{style:{width:"100%",fontSize:"1.5rem",height:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},z("landing.noresults"))),w&&r.a.createElement(I,null),f<v&&!w&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("div",{ref:M,className:"loadMore",onClick:function(){var e="".concat(h,"discover/movie?api_key=").concat(E,"&language=").concat(b,"&with_genres=").concat(t,"&page=").concat(f+1),a="".concat(h,"search/movie?api_key=").concat(E,"&language=").concat(b,"&with_genres=").concat(t,"&query=").concat(C,"&page=").concat(f+1);j(C?a:e)}},z("landing.loadmore")))))},ue=a(95),de=a(28),pe=a(607),ge=a(609),fe=a(610),ve=a(617),he=a(618),Ee=z.a.Title;var be=Object(u.h)((function(e){var t=Object(O.a)().t,a=Object(j.b)(),i=!!localStorage.getItem("rememberMe"),o=Object(n.useState)(""),l=Object(T.a)(o,2),c=l[0],s=l[1],m=Object(n.useState)(i),u=Object(T.a)(m,2),d=u[0],p=u[1],g=function(){p(!d)},f=localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):"";return r.a.createElement(ue.a,{initialValues:{username:f,password:""},validationSchema:de.a().shape({username:de.c().min(2,t("login.usernameErr")).required(t("login.usernameErr2")),password:de.c().min(4,t("login.passwordErr")).required(t("login.passwordErr2"))}),onSubmit:function(n,r){var i=r.setSubmitting;setTimeout((function(){var r={username:n.username,password:n.password};a(function(e){return{type:"login_user",payload:v.a.post("".concat("/api/users","/login"),e).then((function(e){return e.data}))}}(r)).then((function(a){a.payload.loginSuccess?(window.localStorage.setItem("userId",a.payload.userId),!0===d?window.localStorage.setItem("rememberMe",n.username):localStorage.removeItem("rememberMe"),e.history.push("/landing")):s(t("login.formErr"))})).catch((function(e){s(t("login.formErr")),setTimeout((function(){s("")}),3e3)})),i(!1)}),500)}},(function(e){var a=e.values,n=e.touched,i=e.errors,o=e.isSubmitting,l=e.handleChange,s=e.handleBlur,m=e.handleSubmit;return r.a.createElement("section",{className:"flexbox"},r.a.createElement("div",{className:"stretch"},r.a.createElement("div",{className:"loginbg"},r.a.createElement("div",{className:"app login"},r.a.createElement(Ee,{level:3},t("login.login")),r.a.createElement("form",{onSubmit:m,style:{width:"350px"}},r.a.createElement(pe.a.Item,{required:!0},r.a.createElement(ge.a,{id:"username",prefix:r.a.createElement(ve.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:t("login.username"),type:"text",value:a.username,onChange:l,onBlur:s,className:i.username&&n.username?"text-input error":"text-input"}),i.username&&n.username&&r.a.createElement("div",{className:"input-feedback"},i.username)),r.a.createElement(pe.a.Item,{required:!0},r.a.createElement(ge.a,{id:"password",prefix:r.a.createElement(he.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:t("login.password"),type:"password",autoComplete:"off",value:a.password,onChange:l,onBlur:s,className:i.password&&n.password?"text-input error":"text-input"}),i.password&&n.password&&r.a.createElement("div",{className:"input-feedback"},i.password)),c&&r.a.createElement("label",null,r.a.createElement("p",{style:{color:"#ff0000bf",textAlign:"center",fontSize:"0.8rem",border:"1px solid",padding:"0.5rem",borderRadius:"10px"}},c)),r.a.createElement(pe.a.Item,null,r.a.createElement(fe.a,{id:"rememberMe",onChange:g,checked:d},t("login.remember")),r.a.createElement("a",{className:"login-form-forgot",href:"/forgot",style:{float:"right"}},t("login.forgot")),r.a.createElement("div",null,r.a.createElement(q.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{minWidth:"100%"},disabled:o,onSubmit:m},t("login.login"))),"Or ",r.a.createElement("a",{href:"/register"},t("login.registernow"))),r.a.createElement("h3",null,t("login.connect")),r.a.createElement("div",{className:"container",style:{textAlign:"center"}},r.a.createElement("label",null,r.a.createElement("p",{style:{color:"#ff0000bf",backgroundColor:"white",textAlign:"center",fontSize:"0.85rem",border:"1px solid",padding:"0.5rem",borderRadius:"10px"}},"Welcome to the Live Demo.",r.a.createElement("br",null),"You can sign up now or use the following credentials:",r.a.createElement("br",null),r.a.createElement("b",null,"Username:")," test ",r.a.createElement("br",null),r.a.createElement("b",null,"Password:")," test"))))))))}))})),ye=a(310),we={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},xe={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var je=function(e){var t=Object(O.a)().t,a=Object(n.useState)(""),i=Object(T.a)(a,2),o=i[0],l=i[1],c=Object(n.useState)(!1),s=Object(T.a)(c,2),m=s[0],u=s[1],d=r.a.useState(""),p=Object(T.a)(d,2),g=p[0],f=p[1],h=r.a.useRef(),E=["jpg","jpeg","png","gif"],b=function(e){e.preventDefault(),f(e.target.value);var a=e.target.files[0],n="https://api.cloudinary.com/v1_1/".concat("dkyqbngya","/image/upload");if(a&&0!==a.length&&a){var r=a.name.replace(/.*\./,"").toLowerCase();if(E.indexOf(r)<0)return ye.a.error("".concat(a.type).concat(t("register.imgFormat"))),h.current.value="",f(""),void l("");if(a.size>15e4)return ye.a.error("".concat(a.name).concat(t("register.imgTooLarge"))),h.current.value="",f(""),void l("");var i=new FormData;i.append("file",a),i.append("upload_preset","f7r0dz2t"),u(!0);v.a.post(n,i,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){u(!1);var t=e.data.secure_url.split("/");t.splice(-3,0,"w_125,c_scale");var a=new Image;a.src=t.join("/"),l(a.src)})).catch((function(e){if(e)switch(e.response.status){case 400:ye.a.error(t("register.imgInvalid"));break;case 404:ye.a.error(t("register.imgNotFound"));break;case 500:ye.a.error(t("register.imgError"))}}))}},y=Object(j.b)();return r.a.createElement(ue.a,{initialValues:{email:"",firstName:"",lastName:"",username:"",password:"",confirmPassword:"",image:""},validationSchema:de.a().shape({username:de.c().required(t("register.usernameErr")).matches(/^[A-Za-z0-9_]{2,20}$/,t("register.usernameRules")).min(2,t("register.usernameMin")).max(20,t("register.usernameMax")),firstName:de.c().required(t("register.firstNameErr")).matches(/^[A-Z]+$/i,t("register.firstNameAlpha")).min(2,t("register.firstNameMin")).max(20,t("register.firstNameMax")),lastName:de.c().required(t("register.lastNameErr")).matches(/^[A-Z]+$/i,t("register.lastNameAlpha")).min(2,t("register.lastNameMin")).max(20,t("register.lastNameMax")),email:de.c().email(t("register.emailInvalid")).required(t("register.emailErr")),password:de.c().min(4,t("register.passwordMin")).max(15,t("register.passwordMax")).required(t("register.passwordErr")),confirmPassword:de.c().oneOf([de.b("password"),null],t("register.passwordMatch")).required(t("register.cpasswordErr"))}),onSubmit:function(a,n){var r=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password,username:a.username,firstName:a.firstName,lastName:a.lastName,image:o};o&&""!==o?y(function(e){return{type:"register_user",payload:v.a.post("".concat("/api/users","/register"),e).then((function(e){return e.data}))}}(n)).then((function(a){a.payload.success?(F.store.addNotification({message:t("register.checkEmail"),insert:"top",type:"success",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}}),e.history.push("/login")):alert(a.payload.err)})):ye.a.error(t("register.imageErr")),r(!1)}),500)}},(function(e){var a=e.values,n=e.touched,i=e.errors,l=e.isSubmitting,c=e.handleChange,s=e.handleBlur,u=e.handleSubmit;return r.a.createElement("div",{className:"registerbg"},r.a.createElement("div",{className:"register"},r.a.createElement("h1",{style:{textAlign:"center"}},t("register.signup")),r.a.createElement(pe.a,Object.assign({style:{minWidth:"375px"}},we,{onSubmit:u}),r.a.createElement(pe.a.Item,{required:!0,label:t("register.username")},r.a.createElement(ge.a,{id:"username",placeholder:t("register.usernameForm"),type:"text",autoComplete:"username",value:a.username,onChange:c,onBlur:s,className:i.username&&n.username?"text-input error":"text-input"}),i.username&&n.username&&r.a.createElement("div",{className:"input-feedback"},i.username)),r.a.createElement(pe.a.Item,{required:!0,label:t("register.firstName")},r.a.createElement(ge.a,{id:"firstName",placeholder:t("register.firstNameForm"),type:"text",value:a.firstName,onChange:c,onBlur:s,className:i.firstName&&n.firstName?"text-input error":"text-input"}),i.firstName&&n.firstName&&r.a.createElement("div",{className:"input-feedback"},i.firstName)),r.a.createElement(pe.a.Item,{required:!0,label:t("register.lastName")},r.a.createElement(ge.a,{id:"lastName",placeholder:t("register.lastNameForm"),type:"text",value:a.lastName,onChange:c,onBlur:s,className:i.lastName&&n.lastName?"text-input error":"text-input"}),i.lastName&&n.lastName&&r.a.createElement("div",{className:"input-feedback"},i.lastName)),r.a.createElement(pe.a.Item,{required:!0,label:t("register.email")},r.a.createElement(ge.a,{id:"email",placeholder:t("register.emailForm"),type:"email",autoComplete:"email",value:a.email,onChange:c,onBlur:s,className:i.email&&n.email?"text-input error":"text-input"}),i.email&&n.email&&r.a.createElement("div",{className:"input-feedback"},i.email)),r.a.createElement(pe.a.Item,{required:!0,label:t("register.password"),hasFeedback:!0,validateStatus:i.password&&n.password?"error":"success"},r.a.createElement(ge.a,{id:"password",placeholder:t("register.passwordForm"),type:"password",autoComplete:"new-password",value:a.password,onChange:c,onBlur:s,className:i.password&&n.password?"text-input error":"text-input"}),i.password&&n.password&&r.a.createElement("div",{className:"input-feedback"},i.password)),r.a.createElement(pe.a.Item,{required:!0,label:t("register.cpassword"),hasFeedback:!0,validateStatus:i.cpassword&&n.cpassword?"error":"success"},r.a.createElement(ge.a,{id:"confirmPassword",placeholder:t("register.cpasswordForm"),type:"password",autoComplete:"new-password",value:a.confirmPassword,onChange:c,onBlur:s,className:i.confirmPassword&&n.confirmPassword?"text-input error":"text-input"}),i.confirmPassword&&n.confirmPassword&&r.a.createElement("div",{className:"input-feedback"},i.confirmPassword)),r.a.createElement(pe.a.Item,{required:!0,label:t("register.image")},r.a.createElement(ge.a,{id:"image",type:"file",name:"image",accept:"image/*",onChange:b,onBlur:s,value:g,ref:h}),r.a.createElement("div",{name:"image",className:"imagePreview"},m?r.a.createElement(I,null):r.a.createElement("img",{src:o,alt:""}))),r.a.createElement(pe.a.Item,xe,r.a.createElement(q.a,{onClick:u,type:"primary",disabled:l},t("register.submit"))))))}))},_e=a(608),Oe=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_05evm2uwptc9.js"});var ke=function(e){var t=Object(O.a)().t,a=Object(j.c)((function(e){return e.user}));return a.userData&&!a.userData.isAuth?"":r.a.createElement(_e.a,{mode:e.mode},r.a.createElement(_e.a.Item,{key:""},r.a.createElement("a",{href:"/favorite"},r.a.createElement(Oe,{type:"icon-popcorn",style:{fontSize:"25px"}}),t("navbar.favorites"))))},Ne=a(619),Se=a(620),Ce=a(623),Ie=a(588),Fe=a(622),Me=a(591),Te=a(603),ze=Object(Ie.a)((function(e){return{formControl:{marginLeft:10,alignItems:"center"},selectEmpty:{"& .MuiSelect-root":{background:"white"},marginTop:e.spacing(2),marginLeft:10}}}));var qe=Object(u.h)((function(e){var t=Object(O.a)(),a=t.t,i=t.i18n,o=i.language,l=ze();function c(e){var t;t=e.target.value,i.changeLanguage(t),localStorage.setItem("language",e.target.value)}var s=Object(j.c)((function(e){return e.user})),m=Object(n.useState)(""),u=Object(T.a)(m,2),d=u[0],p=u[1],g=Object(n.useState)(!1),f=Object(T.a)(g,2),h=f[0],E=f[1];Object(n.useEffect)((function(){b(),h||E(!0)}),[e,h]);var b=function(){v.a.get("/api/users/auth").then((function(e){e.data?p(e.data.username):alert("Failed to get Username")}))},y=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_5e8qc34kmnl.js"});return s.userData&&!s.userData.isAuth?r.a.createElement(_e.a,{mode:e.mode},r.a.createElement(_e.a.Item,{key:"mail"},r.a.createElement("a",{href:"/login"},a("navbar.login"),r.a.createElement(Ne.a,{style:{padding:"10px"}}))),r.a.createElement(_e.a.Item,{key:"app"},r.a.createElement("a",{href:"/register"},a("navbar.register"),r.a.createElement(Se.a,{style:{padding:"10px"}}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,{className:l.formControl},r.a.createElement(Te.a,{value:o,onChange:c,displayEmpty:!0,autoWidth:!0,disableUnderline:!0,IconComponent:function(){return""},className:l.selectEmpty,inputProps:{"aria-label":"Without label"}},r.a.createElement(Fe.a,{value:"en-US"},r.a.createElement("img",{src:"https://res.cloudinary.com/dkyqbngya/image/upload/c_scale,w_25/v1585483470/united-states-of-america-flag-button-round-xs_xgcefz.png",alt:"US Flag"})),r.a.createElement(Fe.a,{value:"fr-FR"},r.a.createElement("img",{src:"https://res.cloudinary.com/dkyqbngya/image/upload/c_scale,w_25/v1585483466/france-flag-button-round-icon-64_uqllrc.png",alt:"French Flag"})))))):r.a.createElement(_e.a,{mode:e.mode},r.a.createElement(_e.a.Item,{key:"profile"},r.a.createElement("a",{href:"/profile"},a("navbar.welcome"),"\xa0\xa0",r.a.createElement("span",{className:"username"},d))),r.a.createElement(_e.a.Item,{key:"users"},r.a.createElement("a",{href:"/users"},r.a.createElement(y,{type:"icon-group",style:{fontSize:"20px"}}),a("navbar.users"))),r.a.createElement(_e.a.Item,{key:"logout"},r.a.createElement("a",{onClick:function(){v.a.get("".concat("/api/users","/logout")).then((function(t){200===t.status?e.history.push("/login"):alert("Log Out Failed")}))}},r.a.createElement(Ce.a,null),a("navbar.logout"))),r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,{className:l.formControl},r.a.createElement(Te.a,{value:o,onChange:c,displayEmpty:!0,autoWidth:!0,disableUnderline:!0,IconComponent:function(){return""},className:l.selectEmpty,inputProps:{"aria-label":"Without label"}},r.a.createElement(Fe.a,{value:"en-US"},r.a.createElement("img",{src:"https://res.cloudinary.com/dkyqbngya/image/upload/c_scale,w_25/v1585483470/united-states-of-america-flag-button-round-xs_xgcefz.png",alt:"US Flag"})),r.a.createElement(Fe.a,{value:"fr-FR"},r.a.createElement("img",{src:"https://res.cloudinary.com/dkyqbngya/image/upload/c_scale,w_25/v1585483466/france-flag-button-round-icon-64_uqllrc.png",alt:"French Flag"}))))))})),Re=a(604),Ae=a(624);a(548);var De=function(){var e=Object(n.useState)(!1),t=Object(T.a)(e,2),a=t[0],i=t[1],o=Object(j.c)((function(e){return e.user}));return r.a.createElement("nav",{className:"menu",style:{position:"fixed",zIndex:1,width:"100%"}},r.a.createElement("div",{className:"menu__logo"},o.userData&&!o.userData.isAuth?r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"https://res.cloudinary.com/dkyqbngya/image/upload/c_scale,w_200/v1584983552/logo_lqnlwk.png",alt:"Logo",style:{width:"100%",marginTop:"-5px"}})):r.a.createElement("a",{href:"/landing"},r.a.createElement("img",{src:"https://res.cloudinary.com/dkyqbngya/image/upload/c_scale,w_200/v1584983552/logo_lqnlwk.png",alt:"Logo",style:{width:"100%",marginTop:"-5px"}}))),r.a.createElement("div",{className:"menu__container"},r.a.createElement("div",{className:"menu_left"},r.a.createElement(ke,{mode:"horizontal"})),r.a.createElement("div",{className:"menu_right"},r.a.createElement(qe,{mode:"horizontal"})),r.a.createElement(q.a,{className:"menu__mobile-button",type:"primary",onClick:function(){i(!0)}},r.a.createElement(Ae.a,null)),r.a.createElement(Re.a,{title:"Menu",placement:"right",className:"menu_drawer",closable:!1,onClose:function(){i(!1)},visible:a},r.a.createElement(ke,{mode:"inline"}),r.a.createElement(qe,{mode:"inline"}))))};var Pe=function(){return r.a.createElement("div",{style:{height:"80px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"1rem"}},r.a.createElement("p",null,"\xa9 Copyright 2020 - By Sandrine Cao - 42 Project School using ReactJS, NodeJS, Express and MongoDB"))},Le=Object(Ie.a)((function(e){return{playerWrapper:{position:"relative",paddingTop:"56.25%"},reactPlayer:{position:"absolute",top:"0",left:"0"},buttonChooseSource:{color:"white",borderColor:"white"},buttonActors:{borderRadius:"10px !important"},loadingSources:{marginRight:"1em",color:"white"},movieContainer:{paddingTop:50,paddingBottom:50},backdrop:{position:"absolute",height:"100%",width:"100%",zIndex:-1,"&:after":{position:"absolute",content:"''",display:"block",top:0,left:0,width:"100%",height:"100%",background:"rgba(30, 47, 60, 0.75)",backgroundImage:"radial-gradient(circle at 20% 50%, rgba(30, 47, 60, 0.75) 0%, rgba(48, 65, 78, 0.75) 100%)"}},backdropImage:{display:"block",width:"100%",height:"100%",objectFit:"cover"},poster:{width:"100%",borderRadius:10,boxShadow:"0px 3px 20px #0000003b"},releaseDate:{fontSize:"11pt",color:"#dadde2"},vote:{display:"flex",alignItems:"center",fontSize:"12pt"},genreList:{listStyle:"none",padding:0,display:"flex",flexWrap:"wrap"},genre:{cursor:"pointer",padding:"1px 6px",marginRight:10,border:"1px solid white",borderRadius:4,fontSize:"10pt"},subtitle:{marginBottom:8,fontSize:"13pt",color:"white"},crewList:{listStyle:"none",padding:0}}})),Be=a(595),Ue=a(596),We=a(606),Ye=a(116),He=a(625),Ve=a(626);var $e=function(e){var t=Object(O.a)().t,a=Object(j.c)((function(e){return e.user})),i=Object(n.useState)(0),o=Object(T.a)(i,2),l=o[0],c=o[1],s=Object(n.useState)(0),m=Object(T.a)(s,2),u=m[0],d=m[1],p={};return p=e.video?{videoId:e.videoId,userId:e.userId}:{commentId:e.commentId,userId:e.userId},Object(n.useEffect)((function(){var e=!0;return v.a.post("/api/like/getLikes",p).then((function(t){t.data.success&&e&&c(t.data.likes.length)})),function(){e=!1}}),[e,p]),Object(n.useEffect)((function(){var e=!0;return v.a.post("/api/like/getDislikes",p).then((function(t){t.data.success&&e&&d(t.data.dislikes.length)})),function(){e=!1}}),[e,p]),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{key:"comment-basic-like"},r.a.createElement(Ye.a,{title:t("movie.like")},r.a.createElement(He.a,{twoToneColor:"#19ba90",type:"like",onClick:function(){if(a.userData&&!a.userData.isAuth)return e.history.push("/login");v.a.post("/api/like/upLike",p).then((function(t){if(!t.data.success)return e.history.push("/login");!0===t.data.up?(c(l+1),0!==u&&d(u-1)):c(l-1)}))}})),r.a.createElement("span",{style:{paddingLeft:"8px",cursor:"auto"}},l)),"\xa0\xa0\xa0\xa0",r.a.createElement("span",{key:"comment-basic-dislike"},r.a.createElement(Ye.a,{title:t("movie.dislike")},r.a.createElement(Ve.a,{twoToneColor:"#19ba90",type:"dislike",onClick:function(){if(a.userData&&!a.userData.isAuth)return e.history.push("/login");v.a.post("/api/like/upDisLike",p).then((function(t){if(!t.data.success)return e.history.push("/login");!0===t.data.up?(d(u+1),0!==l&&c(l-1)):d(u-1)}))}})),r.a.createElement("span",{style:{paddingLeft:"8px",cursor:"auto"}},u)))},Ze=B.a.Meta,Xe=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_o2mk1ztsiol.js"}),Ge=ge.a.TextArea;var Je=function(e){var t=Object(O.a)().t,a=Object(j.c)((function(e){return e.user})),i=Object(n.useState)(""),o=Object(T.a)(i,2),l=o[0],c=o[1],s=Object(n.useState)(!1),m=Object(T.a)(s,2),u=m[0],d=m[1],p=function(n){if(n.preventDefault(),!l)return ye.a.error(t("movie.replyEmptyCom"));var r,i=new Date,o={writer:a.userData._id,postId:e.postId,date:i,responseTo:e.comment._id,content:(r=l,(r=r.toString()).replace(/<[^>]*(>|$)|&nbsp;|&zwnj;|&raquo;|&laquo;|&gt;/g,""))};v.a.post("/api/comment/saveComment",o).then((function(a){a.data.success?(c(""),d(!u),e.refreshFunction(a.data.result)):ye.a.error(t("movie.failCom"))}))},g=[r.a.createElement($e,{comment:!0,commentId:e.comment._id,userId:localStorage.getItem("userId")}),r.a.createElement("span",{onClick:function(){d(!u)},key:"comment-basic-reply-to"},t("movie.reply"))],f=Object(n.useState)(!1),h=Object(T.a)(f,2),E=h[0],b=h[1],y=function(){b(!0)},w=function(){b(!1)};return r.a.createElement("div",null,r.a.createElement(Be.a,{actions:g,author:e.comment.writer&&e.comment.writer.username?r.a.createElement("b",{onClick:y,style:{cursor:"pointer"}},e.comment.writer.username):t("movie.userDeleted"),avatar:r.a.createElement(Ue.a,{onClick:y,src:e.comment.writer&&e.comment.writer.image?e.comment.writer.image:t("landing.notAvail"),alt:"image"}),datetime:Y()(e.comment.date).format("DD/MM/YYYY - HH:mm"),content:r.a.createElement("p",null,e.comment.content)}),e.comment.writer?r.a.createElement(We.a,{title:"".concat(t("users.profileTitle")," - ").concat(e.comment.writer.username),visible:E,onCancel:w,width:610,style:{top:20},footer:[r.a.createElement(q.a,{type:"primary",key:"Close",onClick:w},t("movieInfo.close"))]},r.a.createElement(B.a,{hoverable:!0,style:{display:"flex",justifyContent:"center",alignItems:"center"},cover:r.a.createElement(Ue.a,{src:e.comment.writer.image,size:84})},r.a.createElement(Ze,{title:r.a.createElement("b",null,e.comment.writer.username)}),r.a.createElement("br",null),r.a.createElement("span",null,e.comment.writer.firstName," ",e.comment.writer.lastName))):null,u&&r.a.createElement("form",{style:{display:"flex"},onSubmit:p},r.a.createElement(Ge,{style:{width:"100%",borderRadius:"5px"},onChange:function(e){c(e.currentTarget.value)},value:l,placeholder:t("movie.comReply")}),r.a.createElement("br",null),r.a.createElement(q.a,{style:{width:"20%",height:"52px"},onClick:p},r.a.createElement(Xe,{type:"icon-send",style:{fontSize:"20px"}}))))};var Ke=function e(t){var a,i=Object(O.a)().t,o=Object(n.useState)(0),l=Object(T.a)(o,2),c=l[0],s=l[1],m=Object(n.useState)(!1),u=Object(T.a)(m,2),d=u[0],p=u[1];return Object(n.useEffect)((function(){var e=0;t.CommentLists.forEach((function(a){a.responseTo===t.parentCommentId&&e++})),s(e)}),[t.CommentLists,t.parentCommentId]),r.a.createElement("div",null,c>0&&r.a.createElement("p",{style:{fontSize:"14px",margin:0,color:"gray"},onClick:function(){p(!d)}},i("movie.view")," ",c," ",i("movie.moreComs")),d&&(a=t.parentCommentId,t.CommentLists.map((function(n,i){return r.a.createElement(r.a.Fragment,{key:n._id},n.responseTo===a&&r.a.createElement("div",{style:{width:"80%",marginLeft:"40px"}},r.a.createElement(Je,{comment:n,postId:t.postId,refreshFunction:t.refreshFunction}),r.a.createElement(e,{CommentLists:t.CommentLists,parentCommentId:n._id,postId:t.postId,refreshFunction:t.refreshFunction})))}))))},Qe=a(627),et=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_o2mk1ztsiol.js"}),tt=ge.a.TextArea,at=z.a.Title;var nt=function(e){var t=Object(O.a)().t,a=Object(j.c)((function(e){return e.user})),i=Object(n.useState)(""),o=Object(T.a)(i,2),l=o[0],c=o[1],s=function(n){if(n.preventDefault(),a.userData&&!a.userData.isAuth)return ye.a.error(t("movie.loginFirst"));if(!l)return ye.a.error(t("movie.emptyCom"));var r,i={content:(r=l,(r=r.toString()).replace(/<[^>]*(>|$)|&nbsp;|&zwnj;|&raquo;|&laquo;|&gt;/g,"")),writer:a.userData._id,postId:e.postId};v.a.post("/api/comment/saveComment",i).then((function(a){a.data.success?(c(""),e.refreshFunction(a.data.result)):ye.a.error(t("movie.failCom"))}))};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(at,{level:3},r.a.createElement(Qe.a,{style:{paddingRight:"10px",fontSize:"30px"}}),t("movie.share")," ",e.movieTitle," "),r.a.createElement("hr",null),e.CommentLists&&e.CommentLists.map((function(t,a){return!t.responseTo&&r.a.createElement(r.a.Fragment,{key:t._id},r.a.createElement(Je,{comment:t,postId:e.postId,refreshFunction:e.refreshFunction}),r.a.createElement(Ke,{CommentLists:e.CommentLists,postId:e.postId,parentCommentId:t._id,refreshFunction:e.refreshFunction}))})),e.CommentLists&&0===e.CommentLists.length&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"}},t("movie.comFirst")),r.a.createElement("form",{style:{display:"flex"},onSubmit:s},r.a.createElement(tt,{style:{width:"100%",borderRadius:"5px"},onChange:function(e){c(e.currentTarget.value)},value:l,placeholder:t("movie.comText")}),r.a.createElement("br",null),r.a.createElement(q.a,{style:{width:"20%",height:"52px"},onClick:s},r.a.createElement(et,{type:"icon-send",style:{fontSize:"20px"}}))))},rt=a(256),it=a.n(rt),ot=a(628),lt=a(597),ct=a(598),st=a(555),mt=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_05evm2uwptc9.js"}),ut=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_c1v18kzse7b.js"});var dt=function(e){var t=Object(O.a)().t,a=Object(u.f)(),i=Object(j.c)((function(e){return e.user})),o=e.movieId,l=e.userFrom,c=e.movieInfo.title,s=e.movieInfo.backdrop_path,m=e.movieInfo.runtime,d=Object(n.useState)(0),p=Object(T.a)(d,2),g=p[0],f=p[1],h=Object(n.useState)(!1),E=Object(T.a)(h,2),b=E[0],y=E[1],w={movieId:o,userFrom:l,movieTitle:c,moviePost:s,movieRunTime:m};return Object(n.useEffect)((function(){var e=!0;return v.a.post("/api/favorite/favoriteNumber",w).then((function(t){t.data.success?e&&f(t.data.subscribeNumber):a.push("/")})).catch((function(e){console.log(e)})),function(){e=!1}}),[e,a,w]),Object(n.useEffect)((function(){var e=!0;return v.a.post("/api/favorite/favorited",w).then((function(t){t.data.success?e&&y(t.data.subcribed):a.push("/")})),function(){e=!1}}),[e,w,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{type:"primary",onClick:function(){if(i.userData&&!i.userData.isAuth)return a.push("/");b?v.a.post("/api/favorite/removeFromFavorite",w).then((function(e){e.data.success?(f(g-1),y(!b)):a.push("/")})):v.a.post("/api/favorite/addToFavorite",w).then((function(e){e.data.success?(f(g+1),y(!b)):a.push("/")}))}},t(b?"favorites.remove":"favorites.add"),b?r.a.createElement(ut,{type:"icon-popcorn1",style:{fontSize:"20px"}}):r.a.createElement(mt,{type:"icon-popcorn",style:{fontSize:"20px"}}),g))};var pt=function(e){var t=Object(n.useState)(!1),a=Object(T.a)(t,2),i=a[0],o=a[1],l=Le(),c=Object(O.a)().t,s=e.movie,m=e.directors,u=e.cast,d=e.trailer,p="#999",g="#cd5c5c",f="#ffa500",v="#52c41a",h=function(e){var t=v;return e&&0!==s.vote_average?e<5.5?t=g:e<7&&(t=f):t=p,t}(s.vote_average),E=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_3easwvxbvnh.js"}),b=[],w="";if(d.length>0){var x;for(x=0;x<d.length;x++)"Trailer"===d[x].type&&b.push(d[x].key);b.length>0&&(w="https://www.youtube.com/embed/"+b[0]+"?&autoplay=1")}var j=function(){o(!1)},_="https://www.youtube.com/embed/"+b[0]+"?&autoplay=0",k=i?w:_;return r.a.createElement("main",{style:{position:"relative"}},r.a.createElement("div",{className:l.backdrop},r.a.createElement("img",{className:l.backdropImage,src:s.backdrop_path?"".concat(y).concat("w1280").concat(s.backdrop_path):"https://res.cloudinary.com/dkyqbngya/image/upload/v1586787757/detykqycj7ejezsjmxln.png",alt:""})),r.a.createElement(lt.a,{className:l.movieContainer},r.a.createElement(ct.a,{container:!0,spacing:7},r.a.createElement(ct.a,{item:!0,md:3},r.a.createElement("img",{className:l.poster,src:s.poster_path?"".concat(y).concat("w500").concat(s.poster_path):c("landing.notAvail"),alt:"Poster of "+s.title})),r.a.createElement(ct.a,{item:!0,md:8,style:{color:"white"}},r.a.createElement("div",{className:l.releaseDate},r.a.createElement("h2",{style:{color:"white"}},s.release_date?Y()(new Date(s.release_date)).format("YYYY"):"N/A")),r.a.createElement(st.a,{variant:"h4",style:{fontWeight:"bold",color:"white"},component:"h1"},r.a.createElement(E,{type:"icon-movie1",style:{fontSize:"30px",paddingRight:"10px"}}),s.title),s.genres.length?r.a.createElement("ul",{className:l.genreList},s.genres.map((function(e,t){return r.a.createElement(K.b,{to:{pathname:"/landing/genre/".concat(e.name,"/").concat(e.id)},key:t},r.a.createElement("li",{className:l.genre,key:e.id},e.name))}))):null,r.a.createElement("div",{className:l.vote},r.a.createElement("span",{style:{margin:"2px 0px 0 6px"}},r.a.createElement(U.a,{style:{backgroundColor:h,marginRight:16},offset:[0,0],count:s.vote_average}),r.a.createElement(dt,{movieInfo:s,movieId:s.id,userFrom:localStorage.getItem("userId")}),d?r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{type:"primary",style:{margin:"15px"},onClick:function(){o(!0)}},r.a.createElement(ot.a,{style:{fontSize:"20px"}})," ",c("movieInfo.trailer")),r.a.createElement(We.a,{title:"".concat(c("movieInfo.trailerTitle")," ").concat(s.title," ").concat(c("movieInfo.watchHyper")),visible:i,onCancel:j,width:610,style:{top:20},footer:[r.a.createElement(q.a,{type:"primary",key:"Close",onClick:j},c("movieInfo.close"))]},r.a.createElement("div",{className:"iframe-container"},r.a.createElement("iframe",{title:s.title,width:"560",height:"315",src:k,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})))):null)),r.a.createElement("div",{style:{marginTop:10,marginBottom:10}},r.a.createElement(st.a,{component:"div",style:{marginRight:15}},r.a.createElement("b",null,c("movieInfo.runtime"))," ",s.runtime?function(e){var t=Math.floor(e/60),a=e%60;return a<10&&(a="0"+a),"".concat(t,"h ").concat(a,"min")}(s.runtime):"N/A"),r.a.createElement(st.a,{component:"div"},r.a.createElement("b",null,c("movieInfo.movietitle"))," ",s.original_title),r.a.createElement(st.a,{component:"div"},r.a.createElement("b",null,c("movieInfo.actors"))," ",u.map((function(e){return e.name})).slice(0,5).join(", "),r.a.createElement("br",null),r.a.createElement("b",null,c("movieInfo.director"))," ",m.map((function(e){return e.name})).join(", "),r.a.createElement("br",null),r.a.createElement("b",null,c("movieInfo.prod"))," ",s.production_companies.map((function(e){return e.name})).shift())),s.overview&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:l.subtitle},c("movieInfo.overview")),r.a.createElement(st.a,{variant:"body1"},s.overview&&s.overview.length>700?s.overview.substring(0,700)+"...":s.overview)),r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(st.a,{component:"div"},r.a.createElement("b",null,c("movieInfo.budget"))," ",s.budget?it()(s.budget).format("0,0[.]00 $"):"N/A"),r.a.createElement(st.a,{component:"div"},r.a.createElement("b",null,c("movieInfo.revenue"))," ",s.revenue?it()(s.revenue).format("0,0[.]00 $"):"N/A"))))))},gt=a(27),ft=a(24),vt=a(217),ht=a(69),Et=a(599),bt=z.a.Title,yt=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_cpuj79al49d.js"}),wt=function(e){Object(ht.a)(a,e);var t=Object(vt.a)(a);function a(e){var n;return Object(gt.a)(this,a),(n=t.call(this,e)).state={data:""},"Recommended Movies"===e.type&&fetch("https://api.themoviedb.org/3/movie/"+n.props.urlParams+"/recommendations?api_key="+E+"&language="+b).then((function(e){return e.json()})).then((function(e){n.setState({data:e.results})})).catch((function(e){return console.error("Error:",e)})),n}return Object(ft.a)(a,[{key:"render",value:function(){var e=this.props.t;if(""===this.state.data)return"";var t=[];for(var a in this.state.data.slice(0,5))this.state.data[a].vote_count>2300&&null!==this.state.data[a].backdrop_path&&null!==this.state.data[a].overview&&t.push(r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(H,{movie:!0,className:"similar_movies",image:this.state.data[a].poster_path?"".concat(y).concat("w500").concat(this.state.data[a].poster_path):e("landing.notAvail"),movieId:this.state.data[a].id,movieName:this.state.data[a].title,date:this.state.data[a].release_date,vote:this.state.data[a].vote_average?this.state.data[a].vote_average:"N/A"})));return r.a.createElement("div",null,r.a.createElement(bt,{level:3},r.a.createElement(yt,{type:"icon-movie",style:{fontSize:"35px",paddingRight:"10px"}}),e("movie.recommended")),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(R.a,{gutter:[16,16]},0===this.state.data.length?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"}},e("movie.recoNone")):t))}}]),a}(r.a.Component),xt=Object(Et.a)()(wt),jt=z.a.Title,_t=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_cpuj79al49d.js"}),Ot=function(e){Object(ht.a)(a,e);var t=Object(vt.a)(a);function a(e){var n;return Object(gt.a)(this,a),(n=t.call(this,e)).state={data:""},"Similar Movies"===e.type&&fetch("https://api.themoviedb.org/3/movie/"+n.props.urlParams+"/similar?api_key="+E+"&language="+b).then((function(e){return e.json()})).then((function(e){n.setState({data:e.results})})).catch((function(e){return console.error("Error:",e)})),n}return Object(ft.a)(a,[{key:"render",value:function(){var e=this.props.t;if(!this.state.data)return"";if(""===this.state.data)return"";var t=[];for(var a in this.state.data.slice(0,5))this.state.data[a].vote_count>2300&&null!==this.state.data[a].backdrop_path&&null!==this.state.data[a].overview&&t.push(r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(H,{movie:!0,className:"similar_movies",image:this.state.data[a].poster_path?"".concat(y).concat("w500").concat(this.state.data[a].poster_path):e("landing.notAvail"),movieId:this.state.data[a].id,movieName:this.state.data[a].title,date:this.state.data[a].release_date,vote:this.state.data[a].vote_average?this.state.data[a].vote_average:"N/A"})));return r.a.createElement("div",null,r.a.createElement(jt,{level:3},r.a.createElement(_t,{type:"icon-movie",style:{fontSize:"35px",paddingRight:"10px"}}),e("movie.similar")),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(R.a,{gutter:[16,16]},0===this.state.data.length?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"}},e("movie.similarNone")):t))}}]),a}(r.a.Component),kt=Object(Et.a)()(Ot),Nt=a(600);var St=function(e){var t=Le(),a=Object(O.a)().t,i=localStorage.getItem("language"),o=z.a.Title,l=e.match.params.movieId,c=Object(n.useState)([]),s=Object(T.a)(c,2),m=s[0],u=s[1],d=Object(n.useState)([]),p=Object(T.a)(d,2),g=p[0],f=p[1],b=Object(n.useState)([]),y=Object(T.a)(b,2),w=y[0],x=y[1],_=Object(n.useState)([]),k=Object(T.a)(_,2),N=k[0],S=k[1],C=Object(n.useState)([]),F=Object(T.a)(C,2),M=F[0],q=F[1],A=Object(n.useState)(!0),D=Object(T.a)(A,2),P=D[0],L=D[1],B=Object(n.useState)(!0),U=Object(T.a)(B,2),W=U[0],Y=U[1],V=Object(n.useState)(!1),$=Object(T.a)(V,2),Z=$[0],X=$[1],G=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_vq7xtyn73yj.js"}),J=e.match.params.movieId,K={postId:J},ee=Object(j.c)((function(e){return e.user})),te=[],ae="";if(w.length>0){var ne;for(ne=0;ne<w.length;ne++)"Trailer"===w[ne].type&&te.push(w[ne].key);te.length>0&&(ae="https://www.youtube.com/embed/"+te[0])}return Object(n.useEffect)((function(){var t=!0,n="".concat(h,"movie/").concat(l,"?api_key=").concat(E,"&language=").concat(i);return fetch(n).then((function(e){return e.json()})).then((function(n){if(n.status_code)t&&L(!0),ye.a.error(a("landing.nomovie")),e.history.push("/landing");else{t&&u(n),t&&L(!1);var r="".concat(h,"movie/").concat(l,"/credits?api_key=").concat(E),o="".concat(h,"movie/").concat(l,"/videos?api_key=").concat(E,"&language=").concat(i);fetch(r).then((function(e){return e.json()})).then((function(e){t&&S(e.cast);var a=e.crew.filter((function(e){return"Director"===e.job}));t&&f(a)})),Y(!1),fetch(o).then((function(e){return e.json()})).then((function(e){t&&x(e.results)}))}})).catch((function(e){return console.error("Error:",e)})),v.a.post("/api/comment/getComments",K).then((function(a){a.data.success?t&&q(a.data.comments):e.history.push("/login")})),function(){t=!1}}),[l,a,e,i]),r.a.createElement("div",null,ee.userData&&ee.userData.isAuth?r.a.createElement(r.a.Fragment,null,!P&&w?r.a.createElement(pt,{movie:m,directors:g,cast:N,trailer:w}):r.a.createElement("div",null,r.a.createElement(I,null)),r.a.createElement("div",{style:{width:"85%",margin:"1rem auto"}},P?null:r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"2rem"}},r.a.createElement(Nt.a,{variant:"contained",className:t.buttonActors,onClick:function(){X(!Z)}},a(Z?"movie.dontShowActors":"movie.showActors"))),Z&&r.a.createElement(R.a,{gutter:[16,16]},W?r.a.createElement("div",null,r.a.createElement(I,null)):N.map((function(e,t){return e.profile_path&&r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(H,{actor:!0,image:e.profile_path,actorName:e.name,charName:e.character}))}))),r.a.createElement("br",null),r.a.createElement(o,{level:3},r.a.createElement(G,{type:"icon-movie2",style:{fontSize:"28px",paddingRight:"10px"}}),a("movie.streamTitle")," ",m.title),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("p",{style:{color:"#ff0000bf",textAlign:"center",fontSize:"1rem",border:"1px solid",padding:"0.5rem",borderRadius:"10px"}},"For legal reasons - this demo only allows you to watch the associated Youtube trailer.")),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"2rem"}},r.a.createElement("div",{className:"iframe-container"},r.a.createElement("iframe",{title:m.title,width:"560",height:"315",src:ae,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement($e,{video:!0,videoId:l,userId:localStorage.getItem("userId")})),r.a.createElement(nt,{movieTitle:m.title,CommentLists:M,postId:J,refreshFunction:function(e){q(M.concat(e))}}),r.a.createElement("br",null),P?null:r.a.createElement("div",null,r.a.createElement(xt,{type:"Recommended Movies",urlParams:l})),P?null:r.a.createElement("div",null,r.a.createElement(kt,{type:"Similar Movies",urlParams:l})))):r.a.createElement(I,null))},Ct=a(615),It=(a(550),a(629)),Ft=a(630),Mt=z.a.Title,Tt=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_3easwvxbvnh.js"}),zt=Object(Q.a)({scriptUrl:"//at.alicdn.com/t/font_1804216_05evm2uwptc9.js"});var qt=function(){var e=Object(O.a)().t,t=Object(n.useState)([]),a=Object(T.a)(t,2),i=a[0],o=a[1],l=Object(n.useState)(!0),c=Object(T.a)(l,2),s=c[0],m=c[1],d=Object(u.f)(),p={userFrom:localStorage.getItem("userId")};Object(n.useEffect)((function(){g()}),[]);var g=function(){v.a.post("/api/favorite/getFavoredMovie",p).then((function(e){e.data.success?(o(e.data.favorites),m(!1)):d.push("/login")}))},f=i.map((function(t,a){var n=r.a.createElement("div",null,t.moviePost?r.a.createElement("img",{src:"".concat(y).concat("w500").concat(t.moviePost),alt:""}):"no image");return r.a.createElement("tr",{key:t._id},r.a.createElement(Ct.a,{content:n,title:"".concat(t.movieTitle)},r.a.createElement("td",null,r.a.createElement(Tt,{type:"icon-movie1",style:{fontSize:"20px",paddingRight:"10px"}}),r.a.createElement("strong",null,r.a.createElement("a",{style:{color:"black"},href:"/movie/".concat(t.movieId)},t.movieTitle)))),r.a.createElement("td",null,r.a.createElement("center",null,r.a.createElement(It.a,{style:{paddingRight:"10px"}}),function(e){var t=Math.floor(e/60),a=e%60;return a<10&&(a="0"+a),"".concat(t,"h ").concat(a,"min")}(t.movieRunTime))),r.a.createElement("td",null,r.a.createElement("center",null,r.a.createElement(q.a,{type:"primary",onClick:function(){return function(e,t){var a={movieId:e,userFrom:t};v.a.post("/api/favorite/removeFromFavorite",a).then((function(e){e.data.success?g():d.push("/login")}))}(t.movieId,t.userFrom)}},r.a.createElement(Ft.a,null),e("favorites.removeButton")))))}));return r.a.createElement("div",{style:{width:"85%",margin:"3rem auto"}},r.a.createElement(Mt,{level:2},r.a.createElement(zt,{type:"icon-popcorn",style:{paddingRight:"10px"}}),e("favorites.title")),r.a.createElement("hr",null),r.a.createElement("br",null),!s&&r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(Tt,{type:"icon-movie1",style:{fontSize:"20px",paddingRight:"10px"}}),e("favorites.movieTitle")),r.a.createElement("th",null,r.a.createElement("center",null,r.a.createElement(It.a,{style:{paddingRight:"10px"}}),e("favorites.movieRuntime"))),r.a.createElement("th",null,r.a.createElement("center",null,r.a.createElement(Ft.a,{style:{paddingRight:"10px"}}),e("favorites.remove"))))),r.a.createElement("tbody",null,f)))},Rt=z.a.Title,At={labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:14},sm:{span:6}}},Dt={wrapperCol:{xs:{span:20,offset:0},sm:{span:14,offset:8}}};var Pt=function(){var e=Object(O.a)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{initialValues:{password:""},validationSchema:de.a().shape({password:de.c().min(4,e("register.passwordMin")).max(15,e("register.passwordMax")).required(e("register.passwordErr")),password_confirm:de.c().oneOf([de.b("password"),null],e("register.passwordMatch")).required(e("register.cpasswordErr"))}),onSubmit:function(t,a){var n=a.setSubmitting;setTimeout((function(){var a,r;(a=t.password,r=t.password_confirm,v.a.post("".concat("/api/users","/updatePassword"),{password:a,password_confirm:r},{headers:w})).then((function(t){200===t.status?F.store.addNotification({message:e("editProfile.newpassok"),insert:"top",type:"success",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}}):alert("Password Update Fail")})),n(!1)}),500)}},(function(t){var a=t.errors,n=t.values,i=t.touched,o=t.isSubmitting,l=t.handleChange,c=t.handleBlur,s=t.handleSubmit;return r.a.createElement("div",{style:{width:"85%",margin:"3rem auto"}},r.a.createElement(Rt,{level:2},r.a.createElement(he.a,{style:{paddingRight:"10px"}}),e("editProfile.editPassword")),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(pe.a,Object.assign({style:{minWidth:"375px"}},At,{onSubmit:s}),r.a.createElement(ge.a,{type:"text",name:"username",value:"",autoComplete:"username",style:{display:"none"}}),r.a.createElement(pe.a.Item,{required:!0,label:e("editProfile.newpass"),hasFeedback:!0,validateStatus:a.password&&i.password?"error":"success"},r.a.createElement(ge.a,{id:"password",prefix:r.a.createElement(he.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:e("register.passwordForm"),type:"password",name:"password",autoComplete:"current-password",onChange:l,onBlur:c,value:n.password,className:a.password&&i.password?"text-input error":"text-input"}),a.password&&i.password&&r.a.createElement("div",{className:"input-feedback"},a.password)),r.a.createElement(pe.a.Item,{required:!0,label:e("editProfile.newcpass"),hasFeedback:!0,validateStatus:a.password_confirm&&i.password_confirm?"error":"success"},r.a.createElement(ge.a,{id:"password_confirm",prefix:r.a.createElement(he.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:e("register.cpasswordForm"),type:"password",name:"password_confirm",autoComplete:"current-password",value:n.password_confirm,onChange:l,onBlur:c,className:a.password_confirm&&i.password_confirm?"text-input error":"text-input"}),a.password_confirm&&i.password_confirm&&r.a.createElement("div",{className:"input-feedback"},a.password_confirm)),r.a.createElement(pe.a.Item,Dt,r.a.createElement(q.a,{onClick:s,type:"primary",disabled:o},e("editProfile.updatePass")))))})))},Lt=z.a.Title,Bt={labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:14},sm:{span:6}}},Ut={wrapperCol:{xs:{span:20,offset:0},sm:{span:14,offset:8}}};var Wt=function(){var e=Object(O.a)(),t=e.t,a=e.i18n,i=Object(n.useState)(!1),o=Object(T.a)(i,2),l=o[0],c=o[1],s=Object(n.useState)(""),m=Object(T.a)(s,2),d=m[0],p=m[1],g=r.a.useState(""),f=Object(T.a)(g,2),h=f[0],E=f[1],b=Object(n.useState)([]),y=Object(T.a)(b,2),w=y[0],x=y[1],_=r.a.useRef(),k=Object(u.f)(),N=["jpg","jpeg","png","gif"],S=a.language;function C(e){var t;t=e.target.value,a.changeLanguage(t),localStorage.setItem("language",e.target.value)}Object(n.useEffect)((function(){v.a.get("/api/users/:userId").then((function(e){e.data.success?x(e.data.users):k.push("/login")}))}),[k]);var M=function(e){e.preventDefault(),E(e.target.value);var a=e.target.files[0],n="https://api.cloudinary.com/v1_1/".concat("dkyqbngya","/image/upload");if(a&&0!==a.length&&a){var r=a.name.replace(/.*\./,"").toLowerCase();if(N.indexOf(r)<0)return ye.a.error("".concat(a.type).concat(t("register.imgFormat"))),_.current.value="",E(""),void p("");if(a.size>15e4)return ye.a.error("".concat(a.name).concat(t("register.imgTooLarge"))),_.current.value="",E(""),void p("");var i=new FormData;i.append("file",a),i.append("upload_preset","f7r0dz2t"),c(!0);v.a.post(n,i,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){c(!1);var t=e.data.secure_url.split("/");t.splice(-3,0,"w_125,c_scale");var a=new Image;a.src=t.join("/"),p(a.src)})).catch((function(e){if(e)switch(e.response.status){case 400:ye.a.error(t("register.imgInvalid"));break;case 404:ye.a.error(t("register.imgNotFound"));break;case 500:ye.a.error(t("register.imgError"))}}))}},z=Object(j.b)();return w.map((function(e,a){return r.a.createElement(r.a.Fragment,{key:e._id},r.a.createElement(ue.a,{initialValues:{email:e.email,firstName:e.firstName,lastName:e.lastName,username:e.username,image:d,lang:S},validationSchema:de.a().shape({username:de.c().required(t("register.usernameErr")).matches(/^[A-Za-z0-9_]{2,20}$/,t("register.usernameRules")).min(2,t("register.usernameMin")).max(20,t("register.usernameMax")),firstName:de.c().required(t("register.firstNameErr")).matches(/^[A-Z]+$/i,t("register.firstNameAlpha")).min(2,t("register.firstNameMin")).max(20,t("register.firstNameMax")),lastName:de.c().required(t("register.lastNameErr")).matches(/^[A-Z]+$/i,t("register.lastNameAlpha")).min(2,t("register.lastNameMin")).max(20,t("register.lastNameMax")),email:de.c().email(t("register.emailInvalid")).required(t("register.emailErr"))}),onSubmit:function(e,a){var n=a.setSubmitting;setTimeout((function(){var a={email:e.email,username:e.username,firstName:e.firstName,lastName:e.lastName,image:d,lang:S};z(function(e){return{type:"update_user",payload:v.a.post("".concat("/api/users","/update"),e).then((function(e){return e.data}))}}(a)).then((function(e){e.payload.success?F.store.addNotification({message:t("editProfile.profileUpdated"),insert:"top",type:"success",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}}):alert(e.payload.err)})),n(!1)}),500)}},(function(a){var n=a.errors,i=a.touched,o=a.isSubmitting,c=a.handleChange,s=a.handleBlur,m=a.handleSubmit;return r.a.createElement("div",{style:{width:"85%",margin:"3rem auto"}},r.a.createElement(Lt,{level:2},r.a.createElement(ve.a,{style:{paddingRight:"10px"}}),t("editProfile.title")),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("main",{style:{position:"relative"}},r.a.createElement(pe.a,Object.assign({key:e._id,style:{minWidth:"375px"}},Bt,{onSubmit:m}),r.a.createElement(pe.a.Item,{required:!0,label:t("editProfile.avatar")},r.a.createElement("div",{name:"image",className:"imagePreview"},d?r.a.createElement(Ue.a,{src:d,size:130}):l?r.a.createElement(I,null):r.a.createElement(Ue.a,{src:e.image,alt:"",size:130})),r.a.createElement(ge.a,{id:"image",type:"file",name:"image",accept:"image/*",ref:_,onChange:M,value:h,onBlur:s})),r.a.createElement(pe.a.Item,{required:!0,label:t("editProfile.prefLang")},r.a.createElement("select",{defaultValue:S,onChange:C},r.a.createElement("option",{value:"en-US"},t("navbar.lngEN")),r.a.createElement("option",{value:"fr-FR"},t("navbar.lngFR")))),r.a.createElement(pe.a.Item,{required:!0,label:t("register.username")},r.a.createElement(ge.a,{id:"username",type:"text",autoComplete:"username",defaultValue:e.username,onChange:c,onBlur:s,className:n.username&&i.username?"text-input error":"text-input"}),n.username&&i.username&&r.a.createElement("div",{className:"input-feedback"},n.username)),r.a.createElement(pe.a.Item,{required:!0,label:t("register.firstName")},r.a.createElement(ge.a,{id:"firstName",type:"text",defaultValue:e.firstName,onChange:c,onBlur:s,className:n.firstName&&i.firstName?"text-input error":"text-input"}),n.firstName&&i.firstName&&r.a.createElement("div",{className:"input-feedback"},n.firstName)),r.a.createElement(pe.a.Item,{required:!0,label:t("register.lastName")},r.a.createElement(ge.a,{id:"lastName",type:"text",defaultValue:e.lastName,onChange:c,onBlur:s,className:n.lastName&&i.lastName?"text-input error":"text-input"}),n.lastName&&i.lastName&&r.a.createElement("div",{className:"input-feedback"},n.lastName)),r.a.createElement(pe.a.Item,{required:!0,label:t("register.email")},r.a.createElement(ge.a,{id:"email",type:"email",autoComplete:"email",defaultValue:e.email,onChange:c,onBlur:s,className:n.email&&i.email?"text-input error":"text-input"}),n.email&&i.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(pe.a.Item,Ut,r.a.createElement(q.a,{onClick:m,type:"primary",disabled:o},t("editProfile.update"))))))})),r.a.createElement("br",null),r.a.createElement(Pt,null))}))};function Yt(e){var t=Object(n.useState)(!1),a=Object(T.a)(t,2),r=a[0],i=a[1],o=Object(O.a)().t;return Object(n.useEffect)((function(){!r&&e&&e.match.params&&e.match.params.tokenConf&&(!function(){var t;(t=e.match.params.tokenConf,v.a.get("".concat("/api/users","/confirmation/").concat(t),{headers:w})).then((function(t){200===t.status?(F.store.addNotification({message:o("login.activated"),insert:"top",type:"success",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}}),e.history.push("/login")):(console.log("res status is : "),F.store.addNotification({message:o("login.tokenFail"),insert:"top",type:"fail",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}}))})).catch((function(e){console.log(e)})),e.history.push("/login")}(),i(!0))}),[e,r,o]),null}var Ht=a(10),Vt=a(611),$t=a(612),Zt=a(601),Xt=Object(Ie.a)((function(e){return{loginContainer:{padding:"9em 0 0 0",margin:"auto"},paper:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:e.spacing(5)},login:{marginTop:"auto",backgroundColor:"rgba(250, 250, 250, 0.9)",borderRadius:"12px",padding:e.spacing(3)},signupButton:{margin:e.spacing(3,0,3,0),borderRadius:"10px !important",color:"white"},textfield:{"& fieldset":{borderRadius:"10px !important"}},form:{width:"100%",marginTop:e.spacing(3)}}}));function Gt(e){var t=Xt(),a=Object(n.useState)(!0),i=Object(T.a)(a,2),o=i[0],l=i[1],c=r.a.useState({err_email:!1}),s=Object(T.a)(c,2),m=s[0],u=s[1],d=r.a.useState({email:""}),p=Object(T.a)(d,2),g=p[0],f=p[1],h=Object(O.a)().t;function E(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}var b=function(t){var a;t.preventDefault(),g&&g.email&&g.email.length&&!E(g.email)?u({err_email:h("reset.resetMailErr")}):E(g.email)&&!m.err_email?(a=g.email,v.a.post("".concat("/api/users","/forgotPassword"),{email:a},{headers:w})).then((function(t){200===t.status&&F.store.addNotification({message:h("reset.resetMail"),insert:"top",type:"success",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}}),e.history.push("/login")})).catch((function(){u({err_email:h("reset.resetMailErr")})})):u({err_mail:h("reset.resetMailErr")})};return r.a.createElement("div",{className:"loginbg"},r.a.createElement("div",{className:t.loginContainer},r.a.createElement(Vt.a,{in:o},r.a.createElement(lt.a,{className:t.login,component:"main",maxWidth:"xs"},r.a.createElement("div",{className:t.paper},r.a.createElement(st.a,{component:"h1",variant:"h5"},h("reset.forgotPassword")),r.a.createElement("form",{className:t.form,onSubmit:b,noValidate:!0},r.a.createElement(ct.a,{alignContent:"center",alignItems:"center",container:!0,spacing:2},r.a.createElement(ct.a,{item:!0,xs:12},r.a.createElement($t.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:h("reset.email"),name:"email",autoComplete:"email",className:t.textfield,value:g.email||"",error:Boolean(m.err_email),helperText:m.err_email,onChange:function(e){var t=m.err_email;"email"===e.target.id&&t&&u(Object(ne.a)({},m,{err_email:!1})),f(Object(ne.a)({},g,Object(Ht.a)({},e.target.id,e.target.value)))}}))),r.a.createElement(q.a,{size:"large",variant:"contained",color:"primary",type:"primary",className:t.signupButton,onClick:b},h("reset.sendMail")),r.a.createElement(ct.a,{container:!0,justify:"flex-end"},r.a.createElement(ct.a,{item:!0},r.a.createElement(Zt.a,{onClick:function(t){l(!o),t.preventDefault(),e.history.push("/register")},href:"#",variant:"body2"},h("reset.account"))))))))))}var Jt=a(593),Kt=Object(Ie.a)((function(e){return{forgotContainer:{padding:"9em 0 0 0",margin:"auto"},paper:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:e.spacing(5)},login:{marginTop:"auto",background:"rgba(250, 250, 250, 0.9)",borderRadius:"12px",padding:e.spacing(3)},signupButton:{margin:e.spacing(3,0,3,0),borderRadius:"10px !important",color:"white"},form:{width:"100%",marginTop:e.spacing(3)}}}));function Qt(e){var t=Kt(),a=Object(O.a)().t;var n=r.a.useState({err_password:!1,err_password_confirm:!1}),i=Object(T.a)(n,2),o=i[0],l=i[1],c=r.a.useState({password:"",password_confirm:""}),s=Object(T.a)(c,2),m=s[0],u=s[1],d=function(e){var t=o.err_password,a=o.err_password_confirm;"password"===e.target.id&&t&&l(Object(ne.a)({},o,{err_password:!1})),"password_confirm"===e.target.id&&a&&l(Object(ne.a)({},o,{err_password:!1})),u(Object(ne.a)({},m,Object(Ht.a)({},e.target.id,e.target.value)))},p=function(t){t.preventDefault();var n,r={password:!1,password_confirm:!1};m.password.length||(r.password=a("reset.validUsername")),m.password!==m.password_confirm?r.password_confirm=a("reset.passwordReq"):(n=m.password,/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/.test(n)||(r.password=a("reset.passwordweak"))),l({err_password:r.password,err_password_confirm:r.password_confirm}),r.password||r.password_confirm||function(e,t,a){return v.a.post("".concat("/api/users","/reset/").concat(e),{tokenConf:e,password:t,password_confirm:a},{headers:w})}(e.match.params.tokenConf,m.password,m.password_confirm).then((function(t){200===t.status&&(F.store.addNotification({message:a("reset.resetSuccess"),insert:"top",type:"success",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}}),console.log("GOOD"),e.history.push("/login"))})).catch((function(t){t.response&&t.response.data&&t.response.data.errors?l({err_password:t.response.data.errors.password,err_password_confirm:t.response.data.errors.password_confirm}):(F.store.addNotification({message:a("reset.resetFail"),insert:"top",type:"danger",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}}),console.log("NOT GOOD"),e.history.push("/login"))}))};return r.a.createElement("div",{className:"loginbg"},r.a.createElement("div",{className:t.forgotContainer},r.a.createElement(Vt.a,{in:!0},r.a.createElement(lt.a,{className:t.login,component:"main",maxWidth:"xs"},r.a.createElement("div",{className:t.paper},r.a.createElement(st.a,{component:"h1",variant:"h5"},a("reset.passwordReset")),r.a.createElement("form",{className:t.form,onSubmit:p,noValidate:!0},r.a.createElement(Jt.a,{type:"text",name:"username",value:"",autoComplete:"username",style:{display:"none"}}),r.a.createElement(ct.a,{alignContent:"center",alignItems:"center",container:!0,spacing:2},r.a.createElement(ct.a,{item:!0,xs:12},r.a.createElement($t.a,{onChange:d,helperText:o.err_password,error:Boolean(o.err_password),variant:"outlined",required:!0,fullWidth:!0,name:"password",label:a("reset.password"),type:"password",id:"password",autoComplete:"current-password"})),r.a.createElement(ct.a,{item:!0,xs:12},r.a.createElement($t.a,{value:m.password_confirm||"",helperText:o.err_password_confirm,error:Boolean(o.err_password_confirm),onChange:d,variant:"outlined",required:!0,fullWidth:!0,name:"password_confirm",label:a("reset.cpassword"),type:"password",id:"password_confirm",autoComplete:"current-password",className:t.textfield}))),r.a.createElement(q.a,{size:"large",variant:"contained",type:"primary",color:"primary",className:t.signupButton,onClick:p},a("reset.resetButton"))))))))}var ea=z.a.Title,ta=B.a.Meta;var aa=function(){var e=Object(O.a)().t,t=Object(n.useState)([]),a=Object(T.a)(t,2),i=a[0],o=a[1],l=Object(n.useState)(!0),c=Object(T.a)(l,2),s=c[0],m=c[1],d=Object(u.f)();Object(n.useEffect)((function(){v.a.get("/api/users/getUsers").then((function(e){e.data.success?(o(e.data.users),m(!1)):d.push("/login")}))}),[d]);var p=i.map((function(e,t){return r.a.createElement(A.a,{lg:6,md:8,xs:24,key:e._id},r.a.createElement(B.a,{hoverable:!0,style:{width:240,display:"flex",justifyContent:"center",alignItems:"center"},cover:r.a.createElement(Ue.a,{src:e.image,size:84})},r.a.createElement(ta,{title:e.username}),r.a.createElement("br",null),r.a.createElement("span",null,e.firstName," ",e.lastName)))}));return r.a.createElement("div",{style:{width:"85%",margin:"3rem auto"}},r.a.createElement(ea,{level:2},e("users.usersTitle")),r.a.createElement("hr",null),r.a.createElement("br",null),!s&&r.a.createElement(R.a,{gutter:[16,16]},p))},na=function(){var e=Object(O.a)().t;return r.a.createElement("div",{className:"not_found_container"},r.a.createElement("div",null,e("notFound.sorry")),r.a.createElement("div",null,e("notFound.notfound")))};var ra=function(){var e=Object(O.a)().t;return r.a.createElement(n.Suspense,{fallback:e(r.a.createElement(I,null))},r.a.createElement(De,null),r.a.createElement("div",{style:{paddingTop:"69px",minHeight:"calc(100vh - 80px)"}},r.a.createElement("div",{className:"notifications"}," ",r.a.createElement(M.a,null)," "),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:_(be,!1)}),r.a.createElement(u.a,{exact:!0,path:"/login",component:_(be,!1)}),r.a.createElement(u.a,{exact:!0,path:"/landing",component:_(ce,!0)}),r.a.createElement(u.a,{exact:!0,path:"/landing/genre/:genreName/:genreId",component:_(me,!0)}),r.a.createElement(u.a,{exact:!0,path:"/register",component:_(je,!1)}),r.a.createElement(u.a,{exact:!0,path:"/movie/:movieId",component:_(St,!0)}),r.a.createElement(u.a,{exact:!0,path:"/favorite",component:_(qt,!0)}),r.a.createElement(u.a,{exact:!0,path:"/profile",component:_(Wt,!0)}),r.a.createElement(u.a,{exact:!0,path:"/users",component:_(aa,!0)}),r.a.createElement(u.a,{exact:!0,path:"/forgot",component:_(Gt,!1)}),r.a.createElement(u.a,{exact:!0,path:"/confirmation/:tokenConf",component:_(Yt,!1)}),r.a.createElement(u.a,{exact:!0,path:"/confirmation/ResetPassword/Reset/:tokenConf",component:_(Qt,!1)}),r.a.createElement(u.a,{component:_(na,null)}))),r.a.createElement(Pe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ia=a(109),oa=Object(ia.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register_user":return Object(ne.a)({},e,{register:t.payload});case"update_user":return Object(ne.a)({},e,{update:t.payload});case"login_user":return Object(ne.a)({},e,{loginSucces:t.payload});case"auth_user":return Object(ne.a)({},e,{userData:t.payload});case"logout_user":return Object(ne.a)({},e);default:return e}}}),la=a(325),ca=a.n(la),sa=a(326),ma=Object(ia.a)(ca.a,sa.a)(ia.d);m.a.render(r.a.createElement(j.a,{store:ma(oa,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},r.a.createElement(K.a,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement(I,null)},r.a.createElement(ra,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[337,1,2]]]);
//# sourceMappingURL=main.bedf0b83.chunk.js.map